# Part-Based 3D Reconstruction Pipeline

This repository contains a **Jupyter-based implementation** of a part-based 3D reconstruction pipeline for 4-way symmetric heritage monuments from the **semantic part mask** of a **single fronto-parallel image**, optionally refined by additional view(s).

---

## Pipeline Structure

The pipeline is implemented as **five notebooks**, intended to be run in order.

### Core Reconstruction
1. **Orthographic semantic voxel carving**  
   Reconstructs an initial semantic voxel grid from a frontoparallel semantic part mask under global and part-wise symmetry.

2. **Perspective camera estimation**  
   Estimates virtual camera parameters by aligning the 3D reconstruction with 2D semantic masks.

3. **Part-wise 3D refinement**  
   Refines individual semantic parts using symmetry-preserving deformations.

### Evaluation
4. **Intra-method analysis**  
   Evaluates reconstruction consistency across pipeline stages.

5. **Inter-method analysis**  
   Compares results with SfM/MVS and reference CAD models.

All notebooks follow the same structure:  
**imports → helper functions → data loading → processing → saving**

---

## Data

Input data is stored under the `data/` directory:

```
data/
├── Akbar/
├── Bibi/
├── Charminar/
├── Itimad/
└── Taj/
```

Each monument folder contains semantic masks (front and optional aerial views).

---

## Results

- **`results/`**  
  Precomputed reference outputs

- **`results_temp/`**  
  Outputs generated by user runs

User-generated results never overwrite files in `results/`.

---

## Running the Pipeline

- Each notebook processes **one monument at a time**
- Imports and helper functions appear first and **should not be modified**
- Monument selection is done in the **data loading section** of each notebook

```python
monuments = ["Akbar","Bibi","Charminar","Itimad","Taj"]
monument_name = monuments[1]
```

- Run notebooks **1 → 2 → 3** for reconstruction
- Notebooks **4 and 5** are optional (evaluation)

Only **data loading and saving blocks** need to be edited.

---

## Dependencies

Python ≥ 3.8 (CPU-only)

```
numpy
scipy
opencv-python
scikit-image
scikit-learn
matplotlib
pillow
pandas
tqdm
plotly
ipywidgets
open3d
trimesh
```

---

## Setup and Installation

### Clone the Repository

```bash
git clone https://github.com/BarnitaSharma/Part-based-3D-Reconstruction.git
cd Part-based-3D-Reconstruction

```

### Create Conda Environment 

```bash
conda create -n part3d python=3.8 -y
conda activate part3d
```

### Install Dependencies

Install dependencies using requirements.txt:
pip install -r requirements.txt

Alternatively, install them manually:

pip install numpy scipy opencv-python scikit-image scikit-learn \
            matplotlib pillow pandas tqdm plotly ipywidgets \
            open3d trimesh

### Install Jupyter

Jupyter is required to run the notebooks and is installed separately:

```bash
pip install notebook jupyterlab
```

### Launch Jupyter
jupyter notebook


## Notes

- The code assumes four-way symmetry and part-level semantic masks
- Reference results are provided for reproducibility
- New runs are automatically written to `results_temp/`
- The core reconstruction pipeline runs on CPU and does not require a GPU
- Semantic part segmentation is optional and uses Segment Anything (GPU-based), provided in `6.Interactive_part_segmentation.ipynb`
- All experiments in the project use precomputed masks; the segmentation notebook is intended for custom data or further evaluation
- Core reconstruction functions are implemented in the `utils/` directory
- Segmentation and interactive tools are implemented in `segmentation_utils/`
